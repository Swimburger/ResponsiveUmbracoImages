@inherits Umbraco.Web.Macros.PartialViewMacroPage
@using Umbraco.Web.Models
@using ContentModels = Umbraco.Web.PublishedModels;
@{
    var image = Umbraco.Media(Model.GetParameterValue<string>("image")) as ContentModels.Image;
    
    var defaultWidth = Model.GetParameterValue<int>("imageDisplayWidth", -1);
    var defaultWidthTablet = Model.GetParameterValue<int>("imageDisplayWidthTablet", -1);
    var defaultWidthPhone = Model.GetParameterValue<int>("imageDisplayWidthPhone", -1);
    
    var alt = Model.GetParameterValue<string>("alt");
    alt = alt == null ? string.Empty : string.Format("alt=\"{0}\"", alt);
}
<picture>
    @if(defaultWidthPhone > 0){
        <source 
            srcset="@image.Url.GetCropUrl(width: defaultWidthPhone)" 
            media="(max-width: 425px)" 
            sizes="@(defaultWidthPhone)px" />
    }
    @if(defaultWidthTablet > 0){
        <source 
            srcset="@image.Url.GetCropUrl(width: defaultWidthTablet)" 
            media="(max-width: 768px)" 
            sizes="@(defaultWidthTablet)px" />
    }@if(defaultWidth > 0){
        <source 
            srcset="@image.Url.GetCropUrl(width: defaultWidth)" 
            sizes="@(defaultWidth)px" />
    }
    <img src="@image.Url" @Html.Raw(alt) />
</picture>